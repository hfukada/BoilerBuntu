password=$(zenity --password --title="Administrator password for $(whoami)")
localmount=$(zenity --entry --title="H drive Location" --text="Please enter where you would like to mount your H drive." --entry-text="/media/H_drive")
p_credentials=$(zenity --forms --add-entry="Career Account Username" --add-password="Password" --title="Purdue Account" --text="Please enter your PUID and password")
p_username=$(echo $p_credentials|cut -d'|' -f1)
p_password=$(echo $p_credentials|cut -d'|' -f2)
 
 
echo $password | sudo -S mkdir $localmount
 
sudo chmod a+rwx $localmount
 
rm ~/.ssh/id_rsa
ssh-keygen -f ~/.ssh/id_rsa -t rsa -N ''
cat ~/.ssh/id_rsa.pub | sshpass -p$p_password ssh -oStrictHostKeyChecking=no $p_username@maven.itap.purdue.edu 'cat >> ~/.ssh/authorized_keys'
(
sudo apt-get install sshpass sshfs|awk '{print "#" $0}'
echo "100"
)|zenity --progress --percentage=0 --auto-close --title="Installing sshfs"
 
sudo usermod -aG fuse $(whoami)
 
sshfs $p_username@picket.ics.purdue.edu: $localmount -o StrictHostKeyChecking=no
echo "sudo umount $localhost &&" > /usr/bin/Hdrive_unmap
sudo chmod 777 /usr/bin/Hdrive_unmap
